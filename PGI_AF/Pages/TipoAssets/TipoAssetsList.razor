@page "/tipoAssets"
@inherits TipoAssetsListComponent

<div class="content-data mt-4">
    <h3>Tipo de Assets (Artefactos)</h3>
        <div class="add-margin">
        <button @onclick="ShowImportModal" class="btn btn-primary mt-2">Importar Tipo de Assets</button>

        <Grid @ref="_tipoAssetGrid"
                  TItem="TipoAsset"
                  class="table table-hover table-bordered table-striped"
                  DataProvider="TipoAssetDataProvider"
                  AllowFiltering="false"
                  Responsive="true"
                  ItemsPerPageText=""
                  PageSizeSelectorVisible="true"
                  PageSize="20"
                  PageSizeSelectorItems="null"
                  EmptyText="No hay registros para mostrar">
                <GridColumn TItem="TipoAsset" HeaderText="Id" PropertyName="ID">
                    @context.ID
                </GridColumn>
                <GridColumn TItem="TipoAsset" HeaderText="Nombre" PropertyName="Nombre">
                    @context.Nombre
                </GridColumn>
                <GridColumn TItem="TipoAsset" HeaderText="Descripcion" PropertyName="Descripcion">
                    @context.Descripcion
                </GridColumn>
                <GridColumn TItem="TipoAsset" HeaderText="Icono" PropertyName="Icono">
                    @if (!string.IsNullOrWhiteSpace(context.Icono))
                    {
                        <text>
                            @context.Icono
                            <Icon Name="@((IconName)Enum.Parse(typeof(IconName), context.Icono))" />
                        </text>
                    }
                    else
                    {
                        <text>-- Sin ícono --</text>
                    }
                </GridColumn>
                <GridColumn TItem="TipoAsset" HeaderText="Acciones">
                    <button class="btn btn-primary btn-sm" @onclick="() => EditTipoAsset(context.ID)" title="Editar Tipo de Asset">
                        <Icon Name="IconName.Pencil" />
                    </button>
                    <button class="btn btn-danger btn-sm" @onclick="() => DeleteTipoAsset(context.ID)" title="Eliminar Tipo de Asset">
                        <Icon Name="IconName.Trash" />
                    </button>
                </GridColumn>
            </Grid>
        </div>
        <button @onclick="CreateNewTipoAsset" class="btn btn-success">Crear Nuevo Tipo Asset</button>
</div>

<!-- Modal for file import -->
@if (isImportModalVisible)
{
    <div class="modal fade show" style="display: block;">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Importar Tipo de Assets</h5>
                    <button type="button" class="btn-close" @onclick="HideImportModal"></button>
                </div>
                <div class="modal-body">
                    <InputFile OnChange="OnFileChange" class="form-control" />
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" @onclick="HideImportModal">Cancelar</button>
                    <button class="btn btn-primary" @onclick="ImportAssets">Importar</button>
                </div>
            </div>
        </div>
    </div>
}