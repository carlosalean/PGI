@page "/analisis"

@inherits AnalisisListComponent

<div class="content-data mt-4">
        <div class="mb-3">
            <label for="Casos" class="form-label">Casos</label>
            <EditForm Model="SelectedCasoId">
                <InputSelect @bind-Value="SelectedCasoId" class="form-control">
                    @if (casos != null && casos.Count > 0)
                    {
                        foreach (var caso in casos)
                        {
                            <option value="@caso.ID">@caso.Nombre</option>
                        }
                    }
                    else
                    {
                        <option disabled="disabled">Cargando casos...</option>
                    }
                </InputSelect>
            </EditForm>
        </div>
        <button @onclick="RunAnalysis" class="btn btn-primary mb-3">Ejecutar Análisis</button>
        <div class="row">
            <div class="col-md-3 no-padding">
                <div class="tighter">
                    <Card Style="color:black" >
                        <CardBody>
                            @if (treeNodes == null)
                            {
                                <p>Loading...</p>
                            }
                            else
                            {
                                <ul>
                                    @foreach (var node in treeNodes)
                                    {
                                        <TreeNodeComponent OnNodeClick="() => HandleNodeClick(node)"
                                                       Node="node"></TreeNodeComponent>
                                    }
                                </ul>
                            }
                        </CardBody>
                    </Card>
                </div>
            </div>
            <div class="col-md-9 no-padding">
                <div class="tighter">
                    <Card >
                            <CardBody>
                                <TipoIOCTabs 
                                    @ref="tipoIOCTabs" 
                                    TipoIOCs="tipoIOCs"> 
                                </TipoIOCTabs>
                            </CardBody>
                        </Card>
                </div>
            </div>
        </div>
</div>